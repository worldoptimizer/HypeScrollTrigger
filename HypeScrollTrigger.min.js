/*
 Hype ScrollTrigger v1.1.0
 Integrates GSAP ScrollTrigger with Tumult Hype for scroll-based animations and interactions.
 Copyright (2025) Max Ziebell, (https://maxziebell.de). MIT-license
*/
'use strict';"HypeScrollTrigger"in window===!1&&(window.HypeScrollTrigger=function(){function P(d,c,g,a={}){if(t.has(d))return t.get(d);const k=g.durationForTimelineNamed(c);if(k===0||k===void 0)return console.warn("\u26a0\ufe0f Timeline '"+c+"' not found or has zero duration"),null;const f=gsap.timeline({paused:!0});f.to({},{duration:1,ease:"none",onUpdate:function(){const l=f.progress();g.goToTimeInTimelineNamed(l*k,c)}});t.set(d,{proxy:f,timelineName:c,api:g,duration:k,smoothEnabled:a.smooth!==
!1});return t.get(d)}function K(d,c,g={}){if(d=t.get(d))c=Math.max(0,Math.min(1,c)),isFinite(c)&&(d.smoothEnabled?gsap.to(d.proxy,{progress:c,duration:g.smoothDuration||n.options.smoothDuration,ease:g.smoothEase||n.options.smoothEase,overwrite:"auto"}):d.proxy.progress(c))}function D(d){return d?n[d]:n}function Q(d,c){for(;c&&c!==document;){const g=d.getSymbolInstanceById(c.id);if(g)return g;c=c.parentNode}return null}function L(d,c,g,a){try{const u=d.currentSceneId(),E="HypeActionEvents"in window!==
!1,y=a.scrollName||g;a=Object.assign({},n.options,a);const w=document.getElementById(u),F=a.horizontal||!1;var k=F?"width":"height";const R=window;var f=c.getBoundingClientRect()[k],l=w.getBoundingClientRect();const M=c.getBoundingClientRect(),N=F?M.left-l.left:M.top-l.top;let p=a.offset!==void 0?a.offset:N,m=a.duration!==void 0?a.duration:f,v=a.triggerHook!==void 0?a.triggerHook:.5;const O=Q(d,c);k=O?O:d;l=c;if(a.pin){const b=c.closest(".hype-gsap-scroll-pin-wrapper");if(b)l=b;else{const e=window.getComputedStyle(c),
h=document.createElement("div");h.classList.add("hype-gsap-scroll-pin-wrapper");h.style.width=e.width;h.style.height=e.height;c.parentNode.insertBefore(h,c);h.appendChild(c);l=h}}typeof m==="string"&&(m=m.endsWith("vh")?parseFloat(m)/100*window.innerHeight:m.endsWith("vw")?parseFloat(m)/100*window.innerWidth:m.endsWith("%")?parseFloat(m)/100*f:parseFloat(m));typeof p==="string"&&(p=p.endsWith("%")?parseFloat(p)/100*f+N:parseFloat(p));if(E){const b=a.scrollCode,e=a.offsetCode||b,h=a.durationCode||
b,z=a.triggerHookCode||b;f={offset:p,duration:m,triggerHook:v};e&&(p=d.triggerAction("return "+e,{element:c,scope:f,event:Object.assign(f,{type:"offset"})})??p);h&&(m=d.triggerAction("return "+h,{element:c,scope:f,event:Object.assign(f,{type:"duration"})})??m);z&&(v=d.triggerAction("return "+z,{element:c,scope:f,event:Object.assign(f,{type:"triggerHook"})})??v)}const A=c.id;let G=null;g&&k&&k.durationForTimelineNamed&&(a.reset&&(k.pauseTimelineNamed(g),k.goToTimeInTimelineNamed(0,g)),G=P(A,g,k,{smooth:a.smooth,
smoothDuration:a.smoothDuration,smoothEase:a.smoothEase}));function B(b,e){var h=e.scrollDirection.charAt(0).toUpperCase()+e.scrollDirection.slice(1).toLowerCase();e=y?y+" ":"";h=e+b+" "+h;b=e+b;d.triggerCustomBehaviorNamed(h);d.triggerCustomBehaviorNamed(b);n.logBehavior&&(console.log(b),console.log(h))}function C(b,e){if(E){const h=a.scrollCode;(b=a[b.toLowerCase()+"Code"]||h)&&d.triggerAction(b,{element:c,event:e})}}function x(b,e,h=null){b={type:b,scrollDirection:e,target:c,currentTarget:c};h!==
null&&(b.progress=h);return b}const r={trigger:w,scroller:R,start:`top+=${p} ${`${v*100}%`}`,end:m===0?`top+=${p} ${`${v*100}%`}`:`top+=${p+m} ${`${v*100}%`}`,horizontal:F,pin:a.pin?l:!1,pinSpacing:!1,fastScrollEnd:!0,anticipatePin:1,syncInterval:16,refreshPriority:-1,preventOverlaps:!0,scrub:!0,invalidateOnRefresh:!0,markers:n.addIndicators||a.addIndicators?{startColor:a.indicatorColor||"grey",endColor:a.indicatorColor||"grey",fontSize:"12px",fontWeight:"bold",indent:10}:!1};if(a.hasOwnProperty("properties")){const b=
typeof a.properties==="string"?a.properties||"scroll":"scroll",e=b==="scroll"?c:document.getElementById(d.documentId());e.style.setProperty("--"+b+"-duration",m);e.style.setProperty("--"+b+"-offset",p);e.style.setProperty("--"+b+"-trigger-hook",v);e.style.setProperty("--"+b+"-progress",0);e.style.setProperty("--"+b+"-pin",a.pin?"1":"0");e.style.setProperty("--"+b+"-start",r.start);e.style.setProperty("--"+b+"-end",r.end)}r.onUpdate=b=>{const e=b.progress;if(b.oldProgress!=e){if(a.hasOwnProperty("properties")){var h=
typeof a.properties==="string"?a.properties||"scroll":"scroll";(h==="scroll"?c:document.getElementById(d.documentId())).style.setProperty("--"+h+"-progress",e)}g&&G&&K(A,e,{smoothDuration:a.smoothDuration,smoothEase:a.smoothEase});if(E&&(h=a.scrollCode,h=a.progressCode||h)){const z=x("progress",b.direction>0?"FORWARD":"REVERSE",e);d.triggerAction(h,{element:c,event:z})}b.oldProgress=e}};r.onRefresh=b=>{if(a.hasOwnProperty("properties")){const e=typeof a.properties==="string"?a.properties||"scroll":
"scroll";(e==="scroll"?c:document.getElementById(d.documentId())).style.setProperty("--"+e+"-progress",b.progress)}};const H=y&&n.behavior.enter;if(H||a.enterCode)r.onEnter=b=>{b=x("enter","FORWARD");a.elementClass&&c.classList.add(a.elementClass);a.sceneClass&&w.classList.add(a.sceneClass);H&&B("Enter",b);a.enterCode&&C("Enter",b)},r.onEnterBack=b=>{b=x("enter","REVERSE");a.elementClass&&c.classList.add(a.elementClass);a.sceneClass&&w.classList.add(a.sceneClass);H&&B("Enter",b);a.enterCode&&C("Enter",
b)};const I=y&&n.behavior.leave;if(I||a.leaveCode)r.onLeave=b=>{const e=x("leave","FORWARD");b.refresh();a.elementClass&&c.classList.remove(a.elementClass);a.sceneClass&&w.classList.remove(a.sceneClass);I&&B("Leave",e);a.leaveCode&&C("Leave",e)},r.onLeaveBack=b=>{b=x("leave","REVERSE");a.elementClass&&c.classList.remove(a.elementClass);a.sceneClass&&w.classList.remove(a.sceneClass);I&&B("Leave",b);a.leaveCode&&C("Leave",b)};const J=ScrollTrigger.create(r);q[u]||(q[u]=[]);q[u].push({trigger:J,id:A});
g&&G&&K(A,J.progress,{smoothDuration:0});return J}catch(u){return console.error("\u274c Error in addScrollTimeline:",u),console.error("Stack trace:",u.stack),null}}if(window.gsap&&window.ScrollTrigger){gsap.registerPlugin(ScrollTrigger);var q={},t=new Map,n={options:{triggerHook:.5,pin:!1,reset:!0,indicatorColor:"grey",smooth:!0,smoothDuration:.3,smoothEase:"power2.out"},behavior:{enter:!0,leave:!0},timelineName:"Main Timeline",logBehavior:!1,addIndicators:!1,autoProperties:!0};"HYPE_eventListeners"in
window===!1&&(window.HYPE_eventListeners=[]);window.HYPE_eventListeners.push({type:"HypeDocumentLoad",callback:function(d,c,g){d.addScrollTimeline=function(a,k,f){return L(d,a,k,f)};ScrollTrigger.config({limitCallbacks:!0,syncInterval:16})}});window.HYPE_eventListeners.push({type:"HypeSceneLoad",callback:function(d,c){const g="HypeActionEvents"in window!==!1;c.querySelectorAll("[data-scroll-trigger],[data-scroll-timeline],[data-scroll-pin],[data-scroll-properties],[data-scroll-element-class],[data-scroll-scene-class]"+
(g?",[data-scroll-action],[data-scroll-progress-action],[data-scroll-enter-action],[data-scroll-leave-action]":"")).forEach(function(a,k){k=a.hasAttribute("data-scroll-timeline")?a.getAttribute("data-scroll-timeline")?a.getAttribute("data-scroll-timeline").split(",").map(l=>l.trim()):[n.timelineName]:[null];const f={pin:a.hasAttribute("data-scroll-pin"),offset:a.getAttribute("data-scroll-offset")||void 0,duration:a.getAttribute("data-scroll-duration")||void 0,triggerHook:a.getAttribute("data-scroll-trigger")?
parseFloat(a.getAttribute("data-scroll-trigger")):void 0,reset:a.getAttribute("data-scroll-reset")==="false"?!1:!0,horizontal:a.hasAttribute("data-scroll-horizontal"),smooth:a.hasAttribute("data-scroll-smooth")?a.getAttribute("data-scroll-smooth")!=="false":void 0,smoothDuration:a.getAttribute("data-scroll-smooth-duration")?parseFloat(a.getAttribute("data-scroll-smooth-duration")):void 0,smoothEase:a.getAttribute("data-scroll-smooth-ease")||void 0};a.hasAttribute("data-scroll-name")&&(f.scrollName=
a.getAttribute("data-scroll-name"));g&&(a.hasAttribute("data-scroll-action")&&(f.scrollCode=a.getAttribute("data-scroll-action")),a.hasAttribute("data-scroll-offset-action")&&(f.offsetCode=a.getAttribute("data-scroll-offset-action")),a.hasAttribute("data-scroll-duration-action")&&(f.durationCode=a.getAttribute("data-scroll-duration-action")),a.hasAttribute("data-scroll-trigger-action")&&(f.triggerHookCode=a.getAttribute("data-scroll-trigger-action")),a.hasAttribute("data-scroll-progress-action")&&
(f.progressCode=a.getAttribute("data-scroll-progress-action")),a.hasAttribute("data-scroll-enter-action")&&(f.enterCode=a.getAttribute("data-scroll-enter-action")),a.hasAttribute("data-scroll-leave-action")&&(f.leaveCode=a.getAttribute("data-scroll-leave-action")));a.hasAttribute("data-scroll-element-class")&&(f.elementClass=a.getAttribute("data-scroll-element-class"));a.hasAttribute("data-scroll-scene-class")&&(f.sceneClass=a.getAttribute("data-scroll-scene-class"));if(a.hasAttribute("data-scroll-properties")){const l=
a.getAttribute("data-scroll-properties");D("autoProperties")&&l=="false"||(f.properties=l)}else D("autoProperties")&&(f.properties=!0);a.getAttribute("data-indicator-color")&&(f.indicatorColor=a.getAttribute("data-indicator-color"));a.hasAttribute("data-indicator-force")&&(f.addIndicators=!0);k.forEach(l=>{L(d,a,l,f)})});ScrollTrigger.refresh()}});window.HYPE_eventListeners.push({type:"HypeSceneUnload",callback:function(d,c){d=c.id;q[d]&&q[d].forEach(({id:g})=>{const a=t.get(g);a&&(gsap.killTweensOf(a.proxy),
a.proxy.kill(),t.delete(g))});q[d]&&(q[d].forEach(({trigger:g})=>{g&&g.kill()}),q[d]=[]);ScrollTrigger.refresh()}});return{version:"1.1.0",setDefault:function(d,c){typeof d=="object"?n=d:n[d]=c},getDefault:D,refresh:()=>{ScrollTrigger.refresh()},getTriggersForScene:d=>q[d]||[],debug:()=>({gsapVersion:gsap.version,scrollTriggerVersion:ScrollTrigger.version,triggers:q,scrollTriggers:ScrollTrigger.getAll(),proxyTimelines:t})}}console.error("\u274c HypeScrollTrigger: GSAP and ScrollTrigger are required but not available. Please include them before this script.")}());
